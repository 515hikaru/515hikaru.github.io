---
title: "2020/04/12 今日したこと"
date: 2020-04-12T18:36:09+09:00
draft: false
tags: ["TID", "JavaScript"]
---

## JavaScript の変数スコープ

すごく基本的なことだが、変数のスコープが「これちゃんと反応するよな...?」と不安になったのでメモ。

```js
function hoge() {
  let foo = { b: 2 };
  let bar = "";
  Object.keys(foo).forEach((key) => {
    bar = foo[key];
    return;
  });
  console.log(bar);
}
hoge(); // => 2
```

この結果は `''` ではなくちゃんと `2` になる。Python3[^1] だと `nonlocal` キーワードとかを使って外の変数使いまっせと宣言しなければならない。

あと `Object.keys(foo).forEach(() => {})` はあくまで `forEach` の中でどのような操作を実行するかなので、 `return` は `hoge` の返り値ではなく `forEach` の返り値である。当たり前なんだけど、そういう当たり前のことでこんがらがる。

[^1]: わたしが Python と書いた時は 9 割 5 分くらいの確率で Python3 のことを指している。
